<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sensor Monitoring Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


    <!-- Leaflet CSS & JS for maps -->
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>

 
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

     <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>

        <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-..."
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
    />



         <!-- CSS files -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/Sensor-cards.css">
    <link rel="stylesheet" href="css/maps.css">
    <link rel="stylesheet" href="css/system-health.css">
    <link rel="stylesheet" href="css/navbar-sidebar.css">
    <link rel="stylesheet" href="css/charts.css">




</head>
<body>


        <!-- ===============================
            NAVBAR
        ================================ -->
        <nav id="menu-bar">
            <img src="logo.png" alt="Water Monitor Logo" id="logo">

                    <!-- Hamburger -->
                    <button id="hamburger">☰</button>

                    <!-- Tabs -->

                    <div class="tabs-container">
                        <nav class="tab-nav">
                            <button class="tab active" data-target="dashboard">DASHBOARD</button>
                            <button class="tab" data-target="reports">REPORTS</button>
                        </nav>
                    </div>


                    <!-- Right icons (always row) -->
                    <div class="nav-right-icons">
                        <button id="notifyBtn" class="icon-btn">
                            <i class="bi bi-bell"></i>
                            <span class="notify-dot"></span>
                        </button>

                        <button id="settingsBtn" class="icon-btn">
                            <i class="bi bi-gear"></i>
                        </button>
                    </div>

                </div>
            </nav>

        <div id="notificationsCard" class="dropdown-card">
            <h6>Notifications</h6>
            <div id="notificationList" class="notification-list"></div>
        </div>

            <div id="settingsCard" class="dropdown-card">
                <h6>System Settings</h6>

                <!-- Map location -->
                <div class="setting-group">
                    <label>Latitude</label>
                    <input type="number" id="latInput" step="0.000001" placeholder="e.g. -15.3875">
                </div>

                <div class="setting-group">
                    <label>Longitude</label>
                    <input type="number" id="lngInput" step="0.000001" placeholder="e.g. 28.3228">
                </div>

                <button id="updateLocation" class="btn btn-primary btn-sm mt-2">
                    Update Map Location
                </button>

                <hr>

                <!-- Water system settings -->
                    <!-- pH Sensor -->
                    <div class="setting-group">
                        <label>pH Ideal Range</label>
                        <input type="text" id="phRangeInput" placeholder="e.g. 6.5-7.5">
                    </div>

                    <!-- Temperature Sensor -->
                    <div class="setting-group">
                        <label>Temperature Ideal Range</label>
                        <input type="text" id="tempRangeInput" placeholder="e.g. 22-26">
                    </div>

                    <!-- TDS Sensor -->
                    <div class="setting-group">
                        <label>TDS Ideal Range</label>
                        <input type="text" id="tdsRangeInput" placeholder="e.g. 200-400">
                    </div>

                    <button id="updateRangesBtn" class="btn btn-primary btn-sm mt-2">
                        Update Ranges
                    </button>
            </div>



<!-- ===============================
     SIDEBAR (MOBILE)
================================ -->
      <div class="app-sidebar">
        <ul class="sidebar-menu">
            <li>
                <a class="nav-link" data-bs-toggle="tab" href="#dashboard">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
            </li>
            <li>
                <a class="nav-link" data-bs-toggle="tab" href="#reports">
                    <i class="bi bi-bar-chart"></i> Reports
                </a>
            </li>
        </ul>
    </div>





<!-- ===============================
        DASHBOARD CONTENT
================================ -->
<div class="tab-content pt-5 mt-4">
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
            <div class="tab-pane fade show active" id="dashboard">
                <div class="sensor-container">
                    <div class="sensor-card ph-sensor">
                        <div class="sensor-header">
                            <div class="sensor-icon">pH</div>
                            <div class="sensor-info">
                                <div class="sensor-name">pH Sensor</div>
                                <div class="sensor-unit">Acidity/Alkalinity Level</div>
                                <div class="sensor-status">Optimal Range: 6.5 - 7.5</div>
                            </div>
                        </div>
                        
                        <div class="chart-row">
                            <div class="chart-container">
                                <canvas id="phChart"></canvas>
                                <div class="percentage-display">
                                    <span id="phValueDisplay">0</span>
                                    <span class="percentage-label">pH Level</span>
                                </div>
                            </div>
                            
                            <div class="info-strip">
                                <div class="strip-title">pH Information</div>
                                <div class="strip-content">
                                                                
                                        <div class="status-item">
                                            <span class="status-label">Ideal Range:</span>
                                            <span id="phIdealRange" class="status-value">6.5 - 7.5</span>
                                        </div>
                                        <div class="status-item">
                                            <span class="status-label">Stability:</span>
                                            <span id="stabilityValue-device_001" class="status-value">--%</span>
                                        </div>


                                    <div class="status-item">
                                        <span class="status-label">WARNING:</span>
                                        <span class="status-value">
                                            <span id="phStatusIcon" class="filter-icon"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sensor-card temp-sensor" data-device-id="device_001">
                        <div class="sensor-header">
                            <div class="sensor-icon">°C</div>
                            <div class="sensor-info">
                                <div class="sensor-name">Temperature Sensor</div>
                                <div class="sensor-unit">Water Temperature</div>
                                <div class="sensor-status">Optimal Range: 22°C - 26°C</div>
                            </div>
                        </div>
                        
                        <div class="chart-row">
                            <div class="chart-container">
                                <canvas id="tempChart"></canvas>
                                <div class="percentage-display">
                                    <span id="tempValueDisplay">0</span>
                                    <span class="percentage-label">°C</span>
                                </div>
                            </div>
                            
                            <div class="info-strip">
                                <div class="strip-title">Temp Information</div>
                                <div class="strip-content">

                                        <div class="status-item">
                                            <span class="status-label">Ideal Range:</span>
                                            <span id="tempIdealRange" class="status-value">22°C - 26°C</span>
                                        </div>

                                        <div class="status-item">
                                            <span class="status-label">24h Change:</span>
                                            <span id="tempChangeValue-device_001" class="status-value">+0.0°C</span>
                                        </div>
                                    <div class="status-item">
                                        <span class="status-label">WARNING:</span>
                                        <span class="status-value">
                                            <span id="heatStatusIcon" class="filter-icon"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sensor-card tds-sensor">
                        <div class="sensor-header">
                            <div class="sensor-icon">TDS</div>
                            <div class="sensor-info">
                                <div class="sensor-name">TDS Sensor</div>
                                <div class="sensor-unit">Total Dissolved Solids</div>
                                <div class="sensor-status">Optimal Range: 200 - 400 ppm</div>
                            </div>
                        </div>
                
                    <div class="chart-row">
                            <div class="chart-container">
                                <canvas id="tdsChart"></canvas>
                                <div class="percentage-display">
                                    <span id="tdsValueDisplay">0</span>
                                    <span class="percentage-label">ppm</span>
                                </div>
                            </div>
                            
                            <div class="info-strip">
                                <div class="strip-title">TDS Information</div>
                                <div class="strip-content">

                                        <div class="status-item">
                                            <span class="status-label">Ideal Range:</span>
                                            <span id="tdsIdealRange" class="status-value">200 - 400 ppm</span>
                                        </div>

                                        <div class="status-item">
                                            <span class="status-label">Change Rate:</span>
                                            <span id="tdsChangeRate-device_001" class="status-value">-- ppm/day</span>
                                        </div>

                                    <div class="status-item">
                                        <span class="status-label">WARNING:</span>
                                        <span class="status-value">
                                            <span id="filterStatusIcon" class="filter-icon"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
                    <!-- ===============================
                        SYSTEM HEALTH & MAP
                    ================================ -->  
                    <!-- Bottom row: map + details -->
                <div class="bottom-row">
                    <div class="map-card">
                        <h3>Location of Water Body</h3>
                        <div id="map" style="height: 300px; background: #eee; border-radius: 12px;"></div>
                    </div>
                    <div class="details-card">
                        <h3>System Health</h3>
                        <div class="status-group">
                            <div class="status-item">
                                <div class="icon-container">
                                    <span class="icon"><i class="fa-solid fa-battery-full"></i></span>
                                </div>
                                <div class="status-info">
                                    <span class="label">Battery Life</span>
                                    <div class="battery-meta">
                                        <span id="batteryValue" class="value-text good">0%</span>
                                        <div class="battery-bar-container">
                                            <div id="batteryLevel" class="battery-fill" style="width: 85%;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="status-item">
                                <div class="icon-container">
                                    <span class="icon"> <i class="fa-solid fa-signal"></i></span>
                                    <span class="pulse-dot"></span> </div>
                                <div class="status-info">
                                    <span class="label">Network Strength</span>
                                    <span id="signalStatus" class="value-text">Checking...(LTE)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        <!-- ===============================
            REPORTS CONTENT
        ================================ -->  
            <div class="tab-pane fade" id="reports">

                <!-- Temperature -->
                <div class="card temperature-chart-card mb-3">
                    <div class="card-body">
                        <h6 class="card-title">Temperature Activity Over Time</h6>
                        <div class="chart-wrapper">
                            <canvas id="lineChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- pH & TDS Side-by-Side -->
                <div class="row g-3">

                    <!-- pH Chart -->
                    <div class="col-md-6">
                        <div class="card temperature-chart-card mb-3">
                            <div class="card-body">
                                <h6 class="card-title">pH Activity Over Time</h6>
                                <div class="chart-wrapper">
                                    <canvas id="phLineChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TDS Chart -->
                    <div class="col-md-6">
                        <div class="card temperature-chart-card mb-3">
                            <div class="card-body">
                                <h6 class="card-title">TDS Activity Over Time</h6>
                                <div class="chart-wrapper">
                                    <canvas id="tdsLineChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

</div>


    </div>
        <div class="last-updated">
            Last updated: <span id="updateTime">Just now</span> | Auto-refresh every 30 seconds
        </div>
    </div>

    <!-- JS files -->
<script src="js/maps.js"></script>
<script src="js/Sensor-cards.js"></script>
<script src="js/system-health.js"></script>
<script src="js/navbar_sidebar.js"></script>
<script src="js/charts.js"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</body>
</html>